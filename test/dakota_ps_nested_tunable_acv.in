environment
	output_precision = 16
	  method_pointer = 'PSTUDY'

##############
# OUTER LOOP #
##############

method,
	id_method = 'PSTUDY'
	model_pointer = 'PSTUDY_M'
        vector_parameter_study
	  step_vector = .01 0. num_steps = 100 # sweep theta1 from .55 to 1.55
#	npsol_sqp
#	  convergence_tolerance = 1.e-6
	output silent

model,
	id_model = 'PSTUDY_M'
	nested
	  variables_pointer  = 'PSTUDY_V'
	  sub_method_pointer = 'UQ'
	  responses_pointer  = 'PSTUDY_R'
# Variable mapping: "type 2" from RefMan docs.
     	  primary_variable_mapping 'theta1' 'theta2'
# Response mapping: inner loop returns alg perf: est_var, equiv_cost
# Here we pull the estvar result for inner loop mapping of cost-bar -> estvar
	  primary_response_mapping = 1. 0. 0. 1.
#	  primary_response_mapping = 1. 0. # Opt: budget constraint embedded

variables,
	id_variables = 'PSTUDY_V'
	continuous_state = 2
	  initial_state  = 0.55 0.5235987755983 # 1.0471975511966 0.5235987755983
#	  lower_bounds   = 2 * 0.5235987755983
#	  upper_bounds   = 2 * 1.5707963267949
	  descriptors    = 'outer_theta1' 'outer_theta2'

responses,
# NOTE: This specifies the TOTAL RESPONSE for the outer loop,
#       which is a combination of nested & interface responses.
	id_responses = 'PSTUDY_R'
	response_functions = 2
#	objective_functions = 1
	no_gradients
	no_hessians


##############
# INNER LOOP #
##############

method,
	id_method = 'UQ'
	model_pointer = 'NONHIER'
	approximate_control_variate acv_mf sqp	
	  max_function_evaluations = 50
	  pilot_samples =  25
	  seed = 8674132
	  final_statistics algorithm_performance
	output silent

model,
	id_model = 'NONHIER'
	variables_pointer = 'HF_VARS'
	surrogate model_ensemble 
	  truth_model = 'HF'
	  unordered_model_fidelities = 'LF2' 'LF1' # tunable problem names

model,
	id_model = 'LF2' # low-fidelity
	variables_pointer = 'LF2_VARS'
#	interface_pointer = 'LF2_INT
	simulation
#	  solution_level_control = 'ModelForm'
#	  solution_level_cost = 0.01 # w = 10 case
	  cost_recovery_metadata = 'cost_model'

model,
	id_model = 'LF1' # mid-fidelity
	variables_pointer = 'LF1_VARS'
#	interface_pointer = 'LF1_INT'
	simulation
#	  solution_level_control = 'ModelForm'
#	  solution_level_cost = 0.1 # w = 10 case
	  cost_recovery_metadata = 'cost_model'

model,
	id_model = 'HF'
	variables_pointer = 'HF_VARS'
#	interface_pointer = 'HF_INT'
	simulation
#	  solution_level_control = 'ModelForm'
#	  solution_level_cost = 1.
	  cost_recovery_metadata = 'cost_model'

variables,
	id_variables = 'LF2_VARS'
	uniform_uncertain = 2
	  lower_bounds    = 2*-1.
	  upper_bounds    = 2* 1.
     	  descriptors     = 'x' 'y'
	continuous_state  = 5
	  initial_state   = 1.5707963267949 1.0471975511966 0.5235987755983 2.5 0.55
     	  descriptors     = 'theta' 'theta1' 'theta2' 'delta' 'gamma'
	discrete_state_set string = 1
	  initial_state = 'LF2'
	  set_values    = 'LF2'
     	  descriptors   = 'ModelForm'  	  

variables,
	id_variables = 'LF1_VARS'
	uniform_uncertain = 2
	  lower_bounds    = 2*-1.
	  upper_bounds    = 2* 1.
     	  descriptors     = 'x' 'y'
	continuous_state  = 5
	  initial_state   = 1.5707963267949 1.0471975511966 0.5235987755983 2.5 0.55
     	  descriptors     = 'theta' 'theta1' 'theta2' 'delta' 'gamma'
	discrete_state_set string = 1
	  initial_state = 'LF1'
	  set_values    = 'LF1'
     	  descriptors   = 'ModelForm' 	  

variables,
	id_variables = 'HF_VARS'
	uniform_uncertain = 2
	  lower_bounds    = 2*-1.
	  upper_bounds    = 2* 1.
     	  descriptors     = 'x' 'y'
	continuous_state  = 5
	  initial_state   = 1.5707963267949 1.0471975511966 0.5235987755983 2.5 0.55
     	  descriptors     = 'theta' 'theta1' 'theta2' 'delta' 'gamma'
	discrete_state_set string = 1
	  initial_state = 'HF'
	  set_values    = 'HF'
     	  descriptors   = 'ModelForm'     	  
     	       	  
interface,
   analysis_driver = 'tunable_model'
   direct

responses,
	response_functions = 1
	no_gradients
	no_hessians
	metadata 'cost_model'
